{{#section "title"}}
  <title>ユーザー一覧</title>
{{/section}}
{{#section "css"}}
  <link rel="stylesheet" href="/public/css/admin-crud.css">
{{/section}}

<section class="admin-list">
  <div class="page-title">
    <h1>{{title}}</h1>
    <a class="back-btn" href="/admin/companies/list">← 戻る</a>
  </div>

  <form method="get" class="filter-bar">
    <input type="text" name="q" value="{{q.q}}" placeholder="氏名/メールで検索">
    <select name="role">
      <option value="all" {{#ifeq q.role "all"}}selected{{/ifeq}}>ロール: すべて</option>
      <option value="admin" {{#ifeq q.role "admin"}}selected{{/ifeq}}>admin</option>
      <option value="member" {{#ifeq q.role "member"}}selected{{/ifeq}}>member</option>
    </select>
    <select name="active">
      <option value="all" {{#ifeq q.active "all"}}selected{{/ifeq}}>状態: すべて</option>
      <option value="1" {{#ifeq q.active "1"}}selected{{/ifeq}}>有効</option>
      <option value="0" {{#ifeq q.active "0"}}selected{{/ifeq}}>無効</option>
    </select>
    <button type="submit">絞り込み</button>
    <a class="btn-subtle" href="/admin/companies/{{company.id}}/users/new">新規登録</a>
  </form>

  <div class="table-wrap">
    <table class="admin-table">
      <thead>
        <tr>
          <th>ID</th><th>氏名</th><th>メール</th><th>ロール</th><th>状態</th><th>操作</th>
        </tr>
      </thead>
      <tbody>
      {{#if items.length}}
        {{#each items}}
        <tr>
          <td>{{this.id}}</td>
          <td>{{this.name}}</td>
          <td>{{this.email}}</td>
          <td><span class="badge">{{this.role}}</span></td>
          <td>
            {{#if this.is_active}}
              <span class="badge badge--green">有効</span>
            {{else}}
              <span class="badge badge--gray">無効</span>
            {{/if}}
          </td>
          <td class="actions">
            <a class="btn" href="/admin/companies/{{../company.id}}/users/{{this.id}}/edit">編集</a>
          </td>
        </tr>
        {{/each}}
      {{else}}
        <tr><td colspan="7" class="muted">該当データがありません</td></tr>
      {{/if}}
      </tbody>
    </table>
  </div>

  {{> pagination}}
</section>
