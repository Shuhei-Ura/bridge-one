{{#section "title"}}
  <title>企業一覧</title>
{{/section}}
{{#section "css"}}
  <link rel="stylesheet" href="/public/css/admin-crud.css">
{{/section}}
<section class="admin-list">
  <div class="page-title">
    <h1>{{title}}</h1>
    <a class="back-btn" href="/admin/companies">← 戻る</a>
  </div>

  <form method="get" class="filter-bar">
    <input type="text" name="q" value="{{q.q}}" placeholder="会社名で検索">
    <select name="type">
      <option value="all" {{#ifeq q.type "all"}}selected{{/ifeq}}>種別: すべて</option>
      <option value="SES" {{#ifeq q.type "SES"}}selected{{/ifeq}}>SES</option>
      <option value="END" {{#ifeq q.type "END"}}selected{{/ifeq}}>END</option>
    </select>
    <select name="active">
      <option value="all" {{#ifeq q.active "all"}}selected{{/ifeq}}>状態: すべて</option>
      <option value="1" {{#ifeq q.active "1"}}selected{{/ifeq}}>有効</option>
      <option value="0" {{#ifeq q.active "0"}}selected{{/ifeq}}>無効</option>
    </select>
    <button type="submit">絞り込み</button>
    <a class="btn-subtle" href="/admin/companies/new">新規登録</a>
  </form>

  <div class="table-wrap">
    <table class="admin-table">
      <thead>
        <tr>
          <th>ID</th><th>会社名</th><th>種別</th><th>会社URL</th><th>状態</th><th>操作</th>
        </tr>
      </thead>
      <tbody>
      {{#if items.length}}
        {{#each items}}
        <tr>
          <td>{{this.id}}</td>
          <td>{{this.name}}</td>
          <td><span class="badge">{{this.company_type}}</span></td>
          <td>{{this.domain}}</td>
          <td>
            {{#if this.is_active}}
              <span class="badge badge--green">有効</span>
            {{else}}
              <span class="badge badge--gray">無効</span>
            {{/if}}
          </td>
          <td class="actions">
            <a class="btn-subtle" href="/admin/companies/{{this.id}}/edit">編集</a>
            <a class="btn-subtle" href="/admin/companies/{{this.id}}/users">ユーザー一覧</a>
            <a class="btn"         href="/admin/companies/{{this.id}}/users/new">ユーザー登録</a>
          </td>
        </tr>
        {{/each}}
      {{else}}
        <tr><td colspan="6" class="muted">該当データがありません</td></tr>
      {{/if}}
      </tbody>
    </table>
  </div>

  {{> pagination}}
</section>
