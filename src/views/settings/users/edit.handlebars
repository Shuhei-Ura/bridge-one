{{#section "title"}}
  <title>ユーザー編集</title>
{{/section}}
{{#section "css"}}
  <link rel="stylesheet" href="/public/css/admin-crud.css">
{{/section}}
{{#section "js"}}
  <script src="/public/js/confirm.js"></script>
{{/section}}

<section class="admin-form">
  <div class="page-title">
    <h1>{{title}}</h1>
    <a class="btn-subtle" href="/companies/{{companyId}}/settings/users">← ユーザー一覧へ</a>
  </div>

  <form method="post" action="/companies/{{companyId}}/settings/users/{{user.id}}">
    <input type="hidden" name="_csrf" value="{{csrfToken}}">

    <label>氏名 <input type="text" name="name" value="{{user.name}}" required></label>
    <label>メール <input type="email" name="email" value="{{user.email}}" required></label>

    <label>パスワード（変更時のみ）
      <input type="password" name="password" autocomplete="new-password" minlength="8" maxlength="72">
    </label>
    <label>パスワード（確認）
      <input type="password" name="password_confirm" autocomplete="new-password" minlength="8" maxlength="72">
    </label>

    <label>ロール
      <select name="role" required>
        <option value="member"  {{#ifeq user.role "member"}}selected{{/ifeq}}>member</option>
        <option value="manager" {{#ifeq user.role "manager"}}selected{{/ifeq}}>manager</option>
        {{#if (eq currentUser.role 'admin')}}
          <option value="admin" {{selected user.role 'admin'}}>admin</option>
        {{/if}}
      </select>
    </label>

    <div class="form-actions">
      <button type="submit" class="btn">保存</button>
      <a href="/companies/{{companyId}}/settings/users" class="btn-subtle">← ユーザー一覧へ</a>
    </div>
  </form>

  <form method="post"
        action="/companies/{{companyId}}/settings/users/{{user.id}}/delete"
        style="margin-left:auto;"
        data-confirm="本当に削除しますか？この操作は取り消せません。">
    <input type="hidden" name="_csrf" value="{{csrfToken}}">
    <button type="submit" class="btn-danger">削除</button>
  </form>
</section>

