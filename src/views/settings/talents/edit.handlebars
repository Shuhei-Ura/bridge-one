{{#section "title"}}
  <title>自社要員編集</title>
{{/section}}
{{#section "css"}}
  <link rel="stylesheet" href="/public/css/talents-form.css">
{{/section}}

<section class="tl-section">
  <div class="page-title">
    <h1>{{title}}</h1>
    <a class="back-btn"
       href="{{#if back}}{{back}}{{else}}/companies/{{companyId}}/settings/talents{{/if}}">
      ← 要員一覧へ
    </a>
  </div>

  <form class="tl-form"
        method="POST"
        action="/companies/{{companyId}}/settings/talents/{{talent.id}}"
        enctype="multipart/form-data">
    <input type="hidden" name="_csrf" value="{{csrfToken}}">
    {{#if back}}<input type="hidden" name="back" value="{{back}}">{{/if}}

    <!-- 基本情報 -->
    <div class="tl-card">
      <div class="tl-card__header">基本情報</div>
      <div class="tl-grid tl-grid--4">
        <div class="tl-field">
          <label class="tl-label">名前 <span class="tl-req">必須</span></label>
          <input class="tl-input" name="name" value="{{talent.name}}" required>
        </div>

        <div class="tl-field">
          <label class="tl-label">イニシャル（外部表示用）<span class="tl-req">必須</span></label>
          <input class="tl-input" name="internal_name" value="{{talent.internal_name}}" required>
        </div>

        <div class="tl-field">
          <label class="tl-label">年齢</label>
          <input class="tl-input" type="number" name="age" min="15" max="80" step="1"
                 value="{{talent.age}}">
        </div>

        <div class="tl-field">
          <label class="tl-label">役割</label>
          <input class="tl-input" name="role" value="{{talent.role}}">
        </div>

        <div class="tl-field">
          <label class="tl-label">都道府県</label>
          <input class="tl-input" name="prefecture" value="{{talent.prefecture}}">
        </div>

        <div class="tl-field">
          <label class="tl-label">希望単価（万円）</label>
          <input class="tl-input" type="number" name="desired_rate" value="{{talent.desired_rate}}">
        </div>

        <div class="tl-field">
          <label class="tl-label">働き方</label>
          <select class="tl-select" name="work_style">
            <option value="">選択してください</option>
            <option value="remote" {{selected talent.work_style "remote"}}>フルリモートのみ</option>
            <option value="hybrid" {{selected talent.work_style "hybrid"}}>ハイブリッド</option>
            <option value="onsite" {{selected talent.work_style "onsite"}}>常駐</option>
          </select>
        </div>

        <div class="tl-field">
          <label class="tl-label">ステータス</label>
          <select class="tl-select" name="status">
            <option value="">選択してください</option>
            <option value="marketing" {{selected talent.status "marketing"}}>営業中</option>
            <option value="interview" {{selected talent.status "interview"}}>面談あり</option>
            <option value="working" {{selected talent.status "working"}}>稼働中</option>
            <option value="left" {{selected talent.status "left"}}>離脱</option>
          </select>
        </div>

        <div class="tl-field">
          <label class="tl-label">エリア（任意）</label>
          <input class="tl-input" name="area" value="{{talent.area}}">
        </div>

        <div class="tl-field">
          <label class="tl-label">稼働開始日（任意）</label>
          <input class="tl-input" type="date" name="available_from" value="{{talent.available_from}}">
        </div>

        <div class="tl-field tl-field--full">
          <label class="tl-label">希望案件（自由記入）</label>
          <input class="tl-input" name="hope" value="{{talent.hope}}">
        </div>

        <div class="tl-field tl-field--full">
          <label class="tl-label">サマリー（概要）</label>
          <textarea class="tl-textarea" name="summary_text" rows="4">{{talent.summary_text}}</textarea>
        </div>
      </div>
    </div>

    <!-- ドキュメント -->
    <div class="tl-card">
      <div class="tl-card__header">ドキュメント</div>
      <div class="tl-grid tl-grid--2">

        <div class="tl-field tl-field--full">
          <label class="tl-label">スキルシートURL（任意・ファイルがあればURLは無視）</label>
          <input class="tl-input" type="url" name="skill_sheet_url" value="{{talent.skill_sheet_url}}">
        </div>

        <div class="tl-field">
          <label class="tl-label">スキルシート（ファイル）</label>
          {{#if talent.skill_sheet_file_path}}
            <p>
              <a href="{{talent.skill_sheet_file_path}}" target="_blank" rel="noopener noreferrer">
                現在のファイルを開く（編集用）
              </a>
            </p>
          {{/if}}
          <input class="tl-file" type="file" name="skill_sheet_file"
                 accept=".pdf,.doc,.docx,.png,.jpg,.jpeg,.webp,.xls,.xlsx,.xlsm,.csv,
                         application/vnd.ms-excel,
                         application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,
                         application/vnd.ms-excel.sheet.macroEnabled.12,
                         text/csv">
        </div>

        <div class="tl-field">
          <label class="tl-label">ポートフォリオ（ファイル任意）</label>
          {{#if talent.portfolio_file_path}}
            <p>
              <a href="{{talent.portfolio_file_path}}" target="_blank" rel="noopener noreferrer">
                現在のファイルを開く（編集用）
              </a>
            </p>
          {{/if}}
          <input class="tl-file" type="file" name="portfolio_file"
                 accept=".pdf,.png,.jpg,.jpeg,.webp,.mp4,.zip,.xls,.xlsx,.xlsm,.csv,
                         application/vnd.ms-excel,
                         application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,
                         application/vnd.ms-excel.sheet.macroEnabled.12,
                         text/csv">
        </div>

      </div>
    </div>

    <div class="tl-actions">
      <button class="tl-btn tl-btn--primary" type="submit">更新する</button>
      <a class="tl-btn tl-btn--ghost"
         href="{{#if back}}{{back}}{{else}}/companies/{{companyId}}/settings/talents{{/if}}">
        ← 要員一覧へ
      </a>
    </div>
  </form>
</section>
